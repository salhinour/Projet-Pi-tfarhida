<!DOCTYPE html>
<html lang="en">
<head>
  <title>Pacific - Free Bootstrap 4 Template by Colorlib</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  {% block stylesheets%}
    <link rel="stylesheet" href="https://js.arcgis.com/4.25/esri/themes/light/main.css">

  <link href="{{asset('https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700,800,900')}}" rel="stylesheet">
	<link href="{{asset('https://fonts.googleapis.com/css2?family=Arizonia&display=swap')}}" rel="stylesheet">

	<link rel="stylesheet" href="{{asset('https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css')}}">

		<link rel="stylesheet" href="{{asset('css/animate.css')}}">
  
  <link rel="stylesheet" href="{{asset('css/owl.carousel.min.css')}}">
	<link rel="stylesheet" href="{{asset('css/owl.theme.default.min.css')}}">
	<link rel="stylesheet" href="{{asset('css/magnific-popup.css')}}">

  <link rel="stylesheet" href="{{asset('css/bootstrap-datepicker.css')}}">
	<link rel="stylesheet" href="{{asset('css/jquery.timepicker.css')}}">

  
  <link rel="stylesheet" href="{{asset('css/flaticon.css')}}">
	<link rel="stylesheet" href="{{asset('css/style.css')}}">
    {% endblock %}
</head>

<body>
 <nav class="navbar navbar-expand-lg navbar-dark ftco_navbar bg-dark ftco-navbar-light" id="ftco-navbar">
   <div class="container">
     <a class="navbar-brand" href="/accueil">Tfarhida<span>Bon plan</span></a>
     <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#ftco-nav" aria-controls="ftco-nav" aria-expanded="false" aria-label="Toggle navigation">
       <span class="oi oi-menu"></span> Menu
     </button>

     <div class="collapse navbar-collapse" id="ftco-nav">
       <ul class="navbar-nav ml-auto">
         <li class="nav-item"><a href="/accueil" class="nav-link">Home</a></li>
         <li class="nav-item"><a href="/activite" class="nav-link">Transport</a></li>
         <li class="nav-item"><a href="/moyen/transport/back" class="nav-link">Admin</a></li>

       </ul>
     </div>
   </div>
 </nav>
 <!-- END nav -->
 
 <section class="hero-wrap hero-wrap-2 js-fullheight" style="background-image: url('/images/bg_1.2.jpg');">
  <div class="overlay"></div>
  <div class="container">
    <div class="row no-gutters slider-text js-fullheight align-items-end justify-content-center">
      <div class="col-md-9 ftco-animate pb-5 text-center">
        <div class="ftco-animate pb-5 text-center" style="margin-top: 80px;">
         <h1 class="mb-0 bread">Transport</h1>
      </div>
     </div>
   </div>
 </div>
</section>

{% block body %}
    {# <h1>MoyenTransport index</h1>

    <table class="table">
        <thead>
            <tr>
                <th>Id</th>
                <th>Type</th>
                <th>Capacite</th>
                <th>Num_serie</th>
                <th>Etat</th>
                <th>actions</th>
            </tr>
        </thead>
        <tbody>
        {% for moyen_transport in moyen_transports %}
            <tr>
                <td>{{ moyen_transport.id }}</td>
                <td>{{ moyen_transport.type }}</td>
                <td>{{ moyen_transport.capacite }}</td>
                <td>{{ moyen_transport.numSerie }}</td>
                <td> {% if moyen_transport.etat == 1 %}
                            Disponible
                        {% else %}
                            Non Disponible
                        {% endif %} </td>
                <td>
                    <a href="{{ path('app_moyen_transport_show', {'id': moyen_transport.id}) }}" class="btn btn-success  ">show</a>
                   
                </td>
            </tr>
        {% else %}
            <tr>
                <td colspan="6">no records found</td>
            </tr>
        {% endfor %} #}
<section class="ftco-section ftco-no-pb ftco-no-pt">
		<div class="container ">
			<div class="row">
				<div class="col-md-12">
					<div class="ftco-search d-flex justify-content-center">
						<div class="row">
							<div class="col-md-12 nav-link-wrap">
								<div class="nav nav-pills text-center" id="v-pills-tab" role="tablist" aria-orientation="vertical">


								</div>
							</div>
							
							<div class="col-md-12 tab-wrap">
								
								<div class="tab-content" id="v-pills-tabContent">
									
   <div class="tab-pane fade show active" id="v-pills-1" role="tabpanel" aria-labelledby="v-pills-nextgen-tab">
    <form id="search-form" action="{{ path('app_moyen_transport_index') }}" class="search-property-1" method="get">
        <div class="row no-gutters">
            <div class="col-md d-flex">
                <div class="form-group p-4 border-0">
                    <label for="#">Moyen de Transport</label>
                    <div class="form-field">
                        <div class="icon"><span class="fa fa-search"></span></div>
                        <input type="text" id="search-input" class="form-control" placeholder="Search " name="type">
                    </div>
                </div>
            </div>
        </div>
    </form>
</div>
						
									
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</section>

    <div id="transport-container">
    <div class="row">
    {% for moyen_transport in moyen_transports %}
        <div class="col-md-3 mb-4">
            <div class="card">
                <div class="ratio ratio-4x3">
                    <img src="{{ asset('uploads/images/' ~ moyen_transport.image) }}" alt="Image du moyen de transport" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div class="card-body">
                    <h5 class="card-title">{{ moyen_transport.type }}</h5>
                    <p class="card-text">
                        <strong>État:</strong> {% if moyen_transport.etat == 1 %} Disponible {% else %} Non Disponible {% endif %}<br>
                    </p>
                    <p class="card-text">
                    Lieu: {{ moyen_transport.lieu}}
                    </p>
                    <div class="row">
                    <a href="{{ path('app_moyen_transport_show', {'id': moyen_transport.id}) }}" class="btn btn-primary btn-lg mr-2">Détails</a>
                    <a href="{{ path('app_trajects_for_moyen_transport', {'id': moyen_transport.id}) }}" class="btn btn-primary btn-lg mr-2">trajects</a>
                    <a href="{{ path('app_moyen_transport_index', {'id': moyen_transport.id}) }}" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#mapModal">station</a>
                </div>
                </div>

            </div>
        </div>
       





    
    {# <div class="col-md-4 ftco-animate fadeInUp ftco-animated">
            <div class="card border-0 shadow" style="background-color: #FDF5E6;"> <!-- Change #f8f9fa to your preferred color code -->
                <div class="ratio ratio-4x3">
                    <img src="{{ asset('uploads/images/' ~ moyen_transport.image) }}" alt="Image du moyen de transport" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div class="card-body text-center">
                    <h5 class="card-title">{{ moyen_transport.type }}</h5>
                    <p class="card-text">
                        <strong>État:</strong> {% if moyen_transport.etat == 1 %} Disponible {% else %} Non Disponible {% endif %}<br>
                    </p>
                    <p class="card-text">
                    Lieu: {{ moyen_transport.lieu}}
                    </p>
                    <div class="row">
                    <a href="{{ path('app_moyen_transport_show', {'id': moyen_transport.id}) }}" class="btn btn-primary btn-lg mr-2">Détails</a>
                    <a href="{{ path('app_trajects_for_moyen_transport', {'id': moyen_transport.id}) }}" class="btn btn-primary btn-lg mr-2">trajects</a>
                    <a href="{{ path('app_moyen_transport_index', {'id': moyen_transport.id}) }}" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#mapModal">station</a>
                </div>
                </div>
                
            </div>
        </div> #}
    {% else %}
        <div class="col-md-12">
            <p>Pas de moyens de transport trouvés.</p>
        </div>
    {% endfor %}
</div>
</div>
</div>
</div>


</section>
<!-- Pagination -->
    <div class="d-flex justify-content-center">
        {{ knp_pagination_render(moyen_transports,'moyen_transport/pagination.html.twig')}}
    </div>
{% endblock %}

<footer class="ftco-footer bg-bottom ftco-no-pt" style="background-image: url(/images/bg_3.jpg);">
  <div class="container">
    <div class="row mb-5">
      <div class="col-md pt-5">
        <div class="ftco-footer-widget pt-md-5 mb-4">
          <h2 class="ftco-heading-2">About</h2>
          <p>Far far away, behind the word mountains, far from the countries Vokalia and Consonantia, there live the blind texts.</p>
          <ul class="ftco-footer-social list-unstyled float-md-left float-lft">
            <li class="ftco-animate"><a href="#"><span class="fa fa-twitter"></span></a></li>
            <li class="ftco-animate"><a href="#"><span class="fa fa-facebook"></span></a></li>
            <li class="ftco-animate"><a href="#"><span class="fa fa-instagram"></span></a></li>
          </ul>
        </div>
      </div>
      <div class="col-md pt-5 border-left">
        <div class="ftco-footer-widget pt-md-5 mb-4 ml-md-5">
          <h2 class="ftco-heading-2">Infromation</h2>
          <ul class="list-unstyled">
            <li><a href="#" class="py-2 d-block">Online Enquiry</a></li>
            <li><a href="#" class="py-2 d-block">General Enquiries</a></li>
            <li><a href="#" class="py-2 d-block">Booking Conditions</a></li>
            <li><a href="#" class="py-2 d-block">Privacy and Policy</a></li>
            <li><a href="#" class="py-2 d-block">Refund Policy</a></li>
            <li><a href="#" class="py-2 d-block">Call Us</a></li>
          </ul>
        </div>
      </div>
      <div class="col-md pt-5 border-left">
       <div class="ftco-footer-widget pt-md-5 mb-4">
        <h2 class="ftco-heading-2">Experience</h2>
        <ul class="list-unstyled">
          <li><a href="#" class="py-2 d-block">Adventure</a></li>
          <li><a href="#" class="py-2 d-block">Hotel and Restaurant</a></li>
          <li><a href="#" class="py-2 d-block">Beach</a></li>
          <li><a href="#" class="py-2 d-block">Nature</a></li>
          <li><a href="#" class="py-2 d-block">Camping</a></li>
          <li><a href="#" class="py-2 d-block">Party</a></li>
        </ul>
      </div>
    </div>
    <div class="col-md pt-5 border-left">
      <div class="ftco-footer-widget pt-md-5 mb-4">
       <h2 class="ftco-heading-2">Have a Questions?</h2>
       <div class="block-23 mb-3">
         <ul>
           <li><span class="icon fa fa-map-marker"></span><span class="text">203 Fake St. Mountain View, San Francisco, California, USA</span></li>
           <li><a href="#"><span class="icon fa fa-phone"></span><span class="text">+2 392 3929 210</span></a></li>
           <li><a href="#"><span class="icon fa fa-paper-plane"></span><span class="text">info@yourdomain.com</span></a></li>
         </ul>
       </div>
     </div>
   </div>
 </div>
 <div class="row">
  <div class="col-md-12 text-center">

    <p><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
      Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made with <i class="fa fa-heart" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank">Colorlib</a>
      <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. --></p>
    </div>
  </div>
</div>
</footer>



<!-- loader -->
<div id="ftco-loader" class="show fullscreen"><svg class="circular" width="48px" height="48px"><circle class="path-bg" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#eeeeee"/><circle class="path" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke-miterlimit="10" stroke="#F96D00"/></svg></div>

{% block js %}
<script src="{{asset('js/jquery.min.js')}}"></script>
<script src="{{asset('js/jquery-migrate-3.0.1.min.js')}}"></script>
<script src="{{asset('js/popper.min.js')}}"></script>
<script src="{{asset('js/bootstrap.min.js')}}"></script>
<script src="{{asset('js/jquery.easing.1.3.js')}}"></script>
<script src="{{asset('js/jquery.waypoints.min.js')}}"></script>
<script src="{{asset('js/jquery.stellar.min.js')}}"></script>
<script src="{{asset('js/owl.carousel.min.js')}}"></script>
<script src="{{asset('js/jquery.magnific-popup.min.js')}}"></script>
<script src="{{asset('js/jquery.animateNumber.min.js')}}"></script>
<script src="{{asset('js/bootstrap-datepicker.js')}}"></script>
<script src="{{asset('js/scrollax.min.js')}}"></script>
<script src="{{asset('https://maps.googleapis.com/maps/api/js?key=AIzaSyBVWaKrjvy3MaE7SQ74_uJiULgl1JY0H2s&sensor=false')}}"></script>
<script src="{{asset('js/google-map.js')}}"></script>
<script src="{{asset('js/main.js')}}"></script>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script src="https://js.arcgis.com/4.25"></script>
{% endblock %}


 <div class="modal fade" id="mapModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Map Modal</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div id="viewDiv" style="height: 500px;"></div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>


    <script>
    require([
        "esri/config",
        "esri/Map",
        "esri/views/MapView",
        "esri/Graphic",
        "esri/rest/locator"
    ], (esriConfig, Map, MapView, Graphic, locator) => {

        esriConfig.apiKey = "AAPK12e9985040fe4016865853dd057dc2d965kBjrbZsfaWIjtHQ2qGy5E_tvrRf8-hLlwxsCxO9nXiJjoa2OEfb-TEDqLPRbBi";

        const map = new Map({
            basemap: "arcgis-navigation"
        });

        const view = new MapView({
            container: "viewDiv",
            map: map,
            constraints: {
                snapToZoom: false
            }
        });

        view.popup.actions = [];

        view.when(() => {
            const geocodingServiceUrl = "https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer";

            const params = {
                address: {
                    "address": "{% for moyen_transport in moyen_transports %}{{ moyen_transport.lieu }}{% endfor %}"
                }
            };

            locator.addressToLocations(geocodingServiceUrl, params)
                .then((results) => {
                    showResult(results);
                })
                .catch((error) => {
                    console.error("Error during geocoding:", error);
                });

            function showResult(results) {
                if (results && results.length > 0) {
                    const result = results[0];
                    console.log(result.address);

                    view.graphics.add(new Graphic({
                        symbol: {
                            type: "simple-marker",
                            color: "#000000",
                            size: "12px",
                            outline: {
                                color: "#ffffff",
                                width: "1px"
                            }
                        },
                        geometry: result.location,
                        attributes: {
                            title: "Address",
                            address: result.address,
                            score: result.score
                        },
                        popupTemplate: {
                            title: "{title}",
                            content: `${result.address}<br><br>${result.location.longitude.toFixed(5)}, ${result.location.latitude.toFixed(5)}`
                        }
                    }));

                    const graphicsCount = view.graphics.length;
                    if (graphicsCount > 0) {
                        const g = view.graphics.getItemAt(graphicsCount - 1);
                        view.popup.open({
                            features: [g],
                            location: g.geometry
                        });

                        view.goTo({
                            target: result.location,
                            zoom: 13
                        });
                    }
                } else {
                    console.error("No geocoding results found.");
                }
            }
        });
    });
</script>
<!-- Add this script to your template -->
<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

<script>
    $(document).ready(function () {
        $('#search-input').on('input', function () {
            var searchTerm = $(this).val();

            $.ajax({
                type: "GET",
                url: "{{ path('app_moyen_transport_index') }}",
                data: { type: searchTerm },
                success: function (data) {
                    // Update the content of the result pane with the filtered data
                    $('#filtered-results').html(data);
                }
            });
        });
    });
</script>
<script src="script.js"></script>
      <script type="text/javascript">
        function googleTranslateElementInit() {
            new google.translate.TranslateElement(
                {pageLanguage: 'en'},
                'google_translate_element'
            );
        } 
  </script>
  <script type="text/javascript" src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
</body>
</html>

